{"is_source_file": true, "format": "Python", "description": "This file defines a VectorStore class that manages storage and retrieval of vector data using the Qdrant vector database. It includes methods to ensure collection existence, insert/update vectors, build filters, and perform searches based on vector similarity and filters.", "external_files": ["qdrant_client.models", "qdrant_client", "src.db.qdrant", "src.utils.logging"], "external_methods": ["get_qdrant_client", "get_logger"], "published": ["VectorStore"], "classes": [{"name": "VectorStore", "description": "A class that interfaces with the Qdrant vector database to perform operations such as creating collections, upserting vectors, and conducting similarity searches."}], "methods": [{"name": "__init__(self)", "description": "Initializes a VectorStore instance with a Qdrant client.", "scope": "VectorStore", "scopeKind": "class"}, {"name": "ensure_collection(self, dim: int)", "description": "Ensures a collection exists with the specified dimension, recreating it if dimensions differ.", "scope": "VectorStore", "scopeKind": "class"}, {"name": "upsert_chunks(self, ids: List[str], vectors: List[List[float]], payloads: List[Dict[str, Any]])", "description": "Inserts or updates a batch of vectors with associated IDs and payloads into the collection.", "scope": "VectorStore", "scopeKind": "class"}, {"name": "Optional[Filter] _build_filter(self, filters: Optional[Dict[str, Any]])", "description": "Constructs a Qdrant filter based on provided metadata filters.", "scope": "VectorStore", "scopeKind": "class"}, {"name": "List[Tuple[float,Dict[str,Any]]] search(self, query_vector: List[float], filters: Optional[Dict[str, Any]], k: int = 8)", "description": "Performs a vector similarity search given a query vector and optional filters, returning top-k results with scores and payloads.", "scope": "VectorStore", "scopeKind": "class"}], "calls": ["get_qdrant_client()", "get_logger(__name__)", "self.client.get_collection(COLLECTION)", "self.client.recreate_collection()", "self.client.upsert()", "self.client.search()"], "search-terms": ["QdrantClient", "vector similarity search", "vector collection management", "upsert vectors", "search with filters"], "state": 2, "file_id": 23, "knowledge_revision": 52, "git_revision": "ee8bdf4d960d0b52a5c512d0a57e94d145ca182f", "ctags": [{"_type": "tag", "name": "COLLECTION", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/vectorstore.py", "pattern": "/^COLLECTION = \"docs\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "VectorStore", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/vectorstore.py", "pattern": "/^class VectorStore:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/vectorstore.py", "pattern": "/^    def __init__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "VectorStore", "scopeKind": "class"}, {"_type": "tag", "name": "_build_filter", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/vectorstore.py", "pattern": "/^    def _build_filter(self, filters: Optional[Dict[str, Any]]) -> Optional[Filter]:$/", "language": "Python", "typeref": "typename:Optional[Filter]", "kind": "member", "signature": "(self, filters: Optional[Dict[str, Any]])", "scope": "VectorStore", "scopeKind": "class"}, {"_type": "tag", "name": "ensure_collection", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/vectorstore.py", "pattern": "/^    def ensure_collection(self, dim: int):$/", "language": "Python", "kind": "member", "signature": "(self, dim: int)", "scope": "VectorStore", "scopeKind": "class"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/vectorstore.py", "pattern": "/^logger = get_logger(__name__)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "search", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/vectorstore.py", "pattern": "/^    def search(self, query_vector: List[float], filters: Optional[Dict[str, Any]], k: int = 8) -/", "language": "Python", "typeref": "typename:List[Tuple[float,Dict[str,Any]]]", "kind": "member", "signature": "(self, query_vector: List[float], filters: Optional[Dict[str, Any]], k: int = 8)", "scope": "VectorStore", "scopeKind": "class"}, {"_type": "tag", "name": "upsert_chunks", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/vectorstore.py", "pattern": "/^    def upsert_chunks(self, ids: List[str], vectors: List[List[float]], payloads: List[Dict[str,/", "language": "Python", "kind": "member", "signature": "(self, ids: List[str], vectors: List[List[float]], payloads: List[Dict[str, Any]])", "scope": "VectorStore", "scopeKind": "class"}], "hash": "a40689098b857dcf018b9bc23f501973", "format-version": 4, "code-base-name": "backend", "filename": "backend/src/services/vectorstore.py", "fields": [{"name": "COLLECTION = \"docs\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "logger = get_logger(__name__)", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"52": "ee8bdf4d960d0b52a5c512d0a57e94d145ca182f"}]}