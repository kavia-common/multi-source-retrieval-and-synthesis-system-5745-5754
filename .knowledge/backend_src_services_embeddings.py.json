{"is_source_file": true, "format": "Python", "description": "This file defines classes and functions related to generating vector embeddings from texts, specifically for OpenAI's embedding models. It includes base classes, a concrete implementation for OpenAI, and utility functions for client instantiation.", "external_files": ["src.utils.config", "src.utils.logging", "httpx", "numpy"], "external_methods": ["settings.OPENAI_API_KEY", "settings.PROVIDER", "get_logger()", "httpx.AsyncClient", "np.linalg.norm"], "published": ["get_embeddings_client"], "classes": [{"name": "BaseEmbeddings", "description": "Abstract base class defining the interface for embedding models, including methods to embed texts and individual queries."}, {"name": "OpenAIEmbeddings", "description": "Concrete implementation of BaseEmbeddings that uses OpenAI's API to generate embeddings, with retry logic for robustness."}], "methods": [{"name": "List[List[float]] embed_texts(self, texts: Sequence[str])", "description": "Asynchronously sends a batch of texts to the API to generate embeddings, normalizes the vectors, and returns them.", "scope": "OpenAIEmbeddings", "scopeKind": "class"}, {"name": "List[float] embed_query(self, text: str)", "description": "Generates an embedding for a single text query by calling embed_texts.", "scope": "BaseEmbeddings", "scopeKind": "class"}, {"name": "BaseEmbeddings get_embeddings_client()", "description": "Factory function returning an embeddings client based on configuration settings; defaults to OpenAI.", "scope": "", "scopeKind": ""}, {"name": "__init__(self)", "scope": "OpenAIEmbeddings", "scopeKind": "class", "description": "unavailable"}], "calls": ["get_logger(__name__)", "httpx.AsyncClient()", "np.linalg.norm()", "settings.OPENAI_API_KEY", "settings.PROVIDER", "raise_for_status()", "json()"], "search-terms": ["embeddings", "OpenAI", "embed_texts", "embedding model", "get_embeddings_client"], "state": 2, "file_id": 17, "knowledge_revision": 46, "git_revision": "ee8bdf4d960d0b52a5c512d0a57e94d145ca182f", "ctags": [{"_type": "tag", "name": "BaseEmbeddings", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/embeddings.py", "pattern": "/^class BaseEmbeddings:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "EMBEDDING_DIMS", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/embeddings.py", "pattern": "/^EMBEDDING_DIMS = {$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "EMBEDDING_MODEL", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/embeddings.py", "pattern": "/^EMBEDDING_MODEL = os.getenv(\"EMBEDDING_MODEL\", \"text-embedding-3-small\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "OpenAIEmbeddings", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/embeddings.py", "pattern": "/^class OpenAIEmbeddings(BaseEmbeddings):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/embeddings.py", "pattern": "/^    def __init__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "OpenAIEmbeddings", "scopeKind": "class"}, {"_type": "tag", "name": "dimension", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/embeddings.py", "pattern": "/^    dimension: int = 1536$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "BaseEmbeddings", "scopeKind": "class"}, {"_type": "tag", "name": "embed_query", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/embeddings.py", "pattern": "/^    async def embed_query(self, text: str) -> List[float]:$/", "language": "Python", "typeref": "typename:List[float]", "kind": "member", "signature": "(self, text: str)", "scope": "BaseEmbeddings", "scopeKind": "class"}, {"_type": "tag", "name": "embed_texts", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/embeddings.py", "pattern": "/^    async def embed_texts(self, texts: Sequence[str]) -> List[List[float]]:$/", "language": "Python", "typeref": "typename:List[List[float]]", "kind": "member", "signature": "(self, texts: Sequence[str])", "scope": "BaseEmbeddings", "scopeKind": "class"}, {"_type": "tag", "name": "embed_texts", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/embeddings.py", "pattern": "/^    async def embed_texts(self, texts: Sequence[str]) -> List[List[float]]:$/", "language": "Python", "typeref": "typename:List[List[float]]", "kind": "member", "signature": "(self, texts: Sequence[str])", "scope": "OpenAIEmbeddings", "scopeKind": "class"}, {"_type": "tag", "name": "get_embeddings_client", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/embeddings.py", "pattern": "/^def get_embeddings_client() -> BaseEmbeddings:$/", "language": "Python", "typeref": "typename:BaseEmbeddings", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/embeddings.py", "pattern": "/^logger = get_logger(__name__)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/embeddings.py", "pattern": "/^    name: str = \"base\"$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "BaseEmbeddings", "scopeKind": "class"}, {"_type": "tag", "name": "np", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/embeddings.py", "pattern": "/^import numpy as np$/", "language": "Python", "kind": "namespace", "nameref": "module:numpy"}], "hash": "3178e6fda30e41b9993eba363f862058", "format-version": 4, "code-base-name": "backend", "filename": "backend/src/services/embeddings.py", "fields": [{"name": "EMBEDDING_DIMS = {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "EMBEDDING_MODEL = os.getenv(\"EMBEDDING_MODEL\", \"text-embedding-3-small\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int dimension", "scope": "BaseEmbeddings", "scopeKind": "class", "description": "unavailable"}, {"name": "logger = get_logger(__name__)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str name", "scope": "BaseEmbeddings", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"46": "ee8bdf4d960d0b52a5c512d0a57e94d145ca182f"}]}