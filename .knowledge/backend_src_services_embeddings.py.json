{"is_source_file": true, "format": "Python", "description": "This file defines classes and functions related to text embedding providers, primarily integrating with OpenAI's embedding API, along with a no-operation fallback. It includes configuration, API interaction, error handling, and a factory method to instantiate the appropriate embedding client based on settings.", "external_files": ["src.utils.config", "src.utils.logging", "httpx"], "external_methods": ["settings.OPENAI_API_KEY", "settings.PROVIDER", "get_logger(__name__)", "resp.raise_for_status()", "resp.json()"], "published": ["get_embeddings_client"], "classes": [{"name": "BaseEmbeddings", "description": "Abstract base class defining the interface for embedding providers."}, {"name": "OpenAIEmbeddings", "description": "Concrete implementation of BaseEmbeddings for OpenAI's embedding API."}, {"name": "NoOpEmbeddings", "description": "Stub class used when embedding provider is not configured; raises exceptions if used."}], "methods": [{"name": "List[List[float]] embed_texts(self, texts: Sequence[str])", "description": "Abstract method to embed a list of texts into vector representations.", "scope": "OpenAIEmbeddings", "scopeKind": "class"}, {"name": "List[float] embed_query(self, text: str)", "description": "Method in BaseEmbeddings that embeds a single query.", "scope": "BaseEmbeddings", "scopeKind": "class"}, {"name": "__init__(self)", "description": "Constructor for OpenAIEmbeddings and NoOpEmbeddings, initializing configuration.", "scope": "OpenAIEmbeddings", "scopeKind": "class"}, {"name": "embed_texts", "description": "Method in OpenAIEmbeddings to asynchronously embed multiple texts using OpenAI API."}, {"name": "embed_texts", "description": "Method in NoOpEmbeddings that raises an HTTPException indicating unconfigured provider."}, {"name": "BaseEmbeddings get_embeddings_client()", "description": "Factory function that returns an appropriate embeddings client based on settings.", "scope": "", "scopeKind": ""}], "calls": ["settings.OPENAI_API_KEY", "settings.PROVIDER", "get_logger(__name__)", "resp.raise_for_status()", "resp.json()"], "search-terms": ["embeddings.py", "OpenAIEmbeddings", "get_embeddings_client", "embedding provider", "text-embedding-3-small"], "state": 2, "file_id": 17, "knowledge_revision": 59, "git_revision": "ee8bdf4d960d0b52a5c512d0a57e94d145ca182f", "revision_history": [{"46": "ee8bdf4d960d0b52a5c512d0a57e94d145ca182f"}, {"59": "ee8bdf4d960d0b52a5c512d0a57e94d145ca182f"}], "ctags": [{"_type": "tag", "name": "BaseEmbeddings", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/embeddings.py", "pattern": "/^class BaseEmbeddings:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "EMBEDDING_DIMS", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/embeddings.py", "pattern": "/^EMBEDDING_DIMS = {$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "EMBEDDING_MODEL", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/embeddings.py", "pattern": "/^EMBEDDING_MODEL = os.getenv(\"EMBEDDING_MODEL\", \"text-embedding-3-small\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "NoOpEmbeddings", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/embeddings.py", "pattern": "/^class NoOpEmbeddings(BaseEmbeddings):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "OpenAIEmbeddings", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/embeddings.py", "pattern": "/^class OpenAIEmbeddings(BaseEmbeddings):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/embeddings.py", "pattern": "/^    def __init__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "NoOpEmbeddings", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/embeddings.py", "pattern": "/^    def __init__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "OpenAIEmbeddings", "scopeKind": "class"}, {"_type": "tag", "name": "dimension", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/embeddings.py", "pattern": "/^    dimension: int = 1536$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "BaseEmbeddings", "scopeKind": "class"}, {"_type": "tag", "name": "embed_query", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/embeddings.py", "pattern": "/^    async def embed_query(self, text: str) -> List[float]:$/", "language": "Python", "typeref": "typename:List[float]", "kind": "member", "signature": "(self, text: str)", "scope": "BaseEmbeddings", "scopeKind": "class"}, {"_type": "tag", "name": "embed_texts", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/embeddings.py", "pattern": "/^    async def embed_texts(self, texts: Sequence[str]) -> List[List[float]]:$/", "language": "Python", "typeref": "typename:List[List[float]]", "kind": "member", "signature": "(self, texts: Sequence[str])", "scope": "BaseEmbeddings", "scopeKind": "class"}, {"_type": "tag", "name": "embed_texts", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/embeddings.py", "pattern": "/^    async def embed_texts(self, texts: Sequence[str]) -> List[List[float]]:$/", "language": "Python", "typeref": "typename:List[List[float]]", "kind": "member", "signature": "(self, texts: Sequence[str])", "scope": "NoOpEmbeddings", "scopeKind": "class"}, {"_type": "tag", "name": "embed_texts", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/embeddings.py", "pattern": "/^    async def embed_texts(self, texts: Sequence[str]) -> List[List[float]]:$/", "language": "Python", "typeref": "typename:List[List[float]]", "kind": "member", "signature": "(self, texts: Sequence[str])", "scope": "OpenAIEmbeddings", "scopeKind": "class"}, {"_type": "tag", "name": "get_embeddings_client", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/embeddings.py", "pattern": "/^def get_embeddings_client() -> BaseEmbeddings:$/", "language": "Python", "typeref": "typename:BaseEmbeddings", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/embeddings.py", "pattern": "/^logger = get_logger(__name__)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/embeddings.py", "pattern": "/^    name: str = \"base\"$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "BaseEmbeddings", "scopeKind": "class"}, {"_type": "tag", "name": "np", "path": "/home/kavia/workspace/code-generation/multi-source-retrieval-and-synthesis-system-5745-5754/backend/src/services/embeddings.py", "pattern": "/^import numpy as np$/", "language": "Python", "kind": "namespace", "nameref": "module:numpy"}], "hash": "e7ea03af905cfbb5cc9e698e245e41cf", "format-version": 4, "code-base-name": "backend", "filename": "backend/src/services/embeddings.py", "fields": [{"name": "EMBEDDING_DIMS = {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "EMBEDDING_MODEL = os.getenv(\"EMBEDDING_MODEL\", \"text-embedding-3-small\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int dimension", "scope": "BaseEmbeddings", "scopeKind": "class", "description": "unavailable"}, {"name": "logger = get_logger(__name__)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str name", "scope": "BaseEmbeddings", "scopeKind": "class", "description": "unavailable"}]}